"use strict";(()=>{var e={};e.id=191,e.ids=[191],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4328:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{GET:()=>p,POST:()=>d});var a=t(9303),n=t(8716),o=t(670),u=t(7070),i=t(5662);async function p(e){try{let{searchParams:r}=new URL(e.url),t=r.get("user_id");if(!t)return u.NextResponse.json({error:"User ID required"},{status:400});let{data:s,error:a}=await i.O.from("tags").select("*").eq("user_id",t).order("sort_order");if(a)return u.NextResponse.json({error:a.message},{status:500});let n=s||[],o=new Map,p=[];return n.forEach(e=>{e.children=[],o.set(e.id,e)}),n.forEach(e=>{e.parent_id&&o.has(e.parent_id)?o.get(e.parent_id).children.push(e):p.push(e)}),u.NextResponse.json({tags:p})}catch(e){return u.NextResponse.json({error:"Internal server error"},{status:500})}}async function d(e){try{let{user_id:r,name:t,icon:s,color:a,parent_id:n,is_folder:o}=await e.json();if(!r||!t)return u.NextResponse.json({error:"User ID and name required"},{status:400});let{data:p,error:d}=await i.O.from("tags").insert({user_id:r,name:t,icon:s||"\uD83D\uDCC1",color:a||"#6366f1",parent_id:n||null,is_folder:o||!1}).select().single();if(d)return u.NextResponse.json({error:d.message},{status:500});return u.NextResponse.json({tag:p},{status:201})}catch(e){return u.NextResponse.json({error:"Internal server error"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/tags/route",pathname:"/api/tags",filename:"route",bundlePath:"app/api/tags/route"},resolvedPagePath:"D:\\vibecode\\tasktask\\app\\api\\tags\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:h}=c,x="/api/tags/route";function f(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},5662:(e,r,t)=>{t.d(r,{N:()=>n,O:()=>a});var s=t(7857);let a=(0,s.eI)("https://your-project.supabase.co","your-anon-key"),n=()=>(0,s.eI)("https://your-project.supabase.co","your-anon-key")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,564],()=>t(4328));module.exports=s})();