"use strict";(()=>{var e={};e.id=943,e.ids=[943],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8946:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>k,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>y,staticGenerationAsyncStorage:()=>c});var a={};r.r(a),r.d(a,{POST:()=>p});var s=r(9303),o=r(8716),n=r(670),i=r(7070),u=r(5662);async function p(e,{params:t}){try{let{data:e,error:r}=await u.O.from("tasks").select("tally_count, user_id").eq("id",t.id).single();if(r)return i.NextResponse.json({error:r.message},{status:500});let a=(e.tally_count||0)+1,{data:s,error:o}=await u.O.from("tasks").update({tally_count:a,last_active_at:new Date().toISOString()}).eq("id",t.id).select().single();if(o)return i.NextResponse.json({error:o.message},{status:500});return await u.O.rpc("add_xp",{user_id:e.user_id,amount:1}),i.NextResponse.json({task:s,tally_count:a,xp_earned:1})}catch(e){return i.NextResponse.json({error:"Internal server error"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/tasks/[id]/tally/route",pathname:"/api/tasks/[id]/tally",filename:"route",bundlePath:"app/api/tasks/[id]/tally/route"},resolvedPagePath:"D:\\vibecode\\tasktask\\app\\api\\tasks\\[id]\\tally\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:c,serverHooks:y}=d,k="/api/tasks/[id]/tally/route";function m(){return(0,n.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:c})}},5662:(e,t,r)=>{r.d(t,{N:()=>o,O:()=>s});var a=r(7857);let s=(0,a.eI)("https://your-project.supabase.co","your-anon-key"),o=()=>(0,a.eI)("https://your-project.supabase.co","your-anon-key")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,564],()=>r(8946));module.exports=a})();