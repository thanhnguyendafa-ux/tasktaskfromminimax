"use strict";(()=>{var e={};e.id=495,e.ids=[495],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7133:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>k,patchFetch:()=>x,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>p,POST:()=>d});var a=r(9303),o=r(8716),n=r(670),u=r(7070),i=r(5662);async function p(e){try{let{searchParams:t}=new URL(e.url),r=t.get("user_id"),s=t.get("status"),a=t.get("limit")||"50";if(!r)return u.NextResponse.json({error:"User ID required"},{status:400});let o=i.O.from("tasks").select(`
        *,
        tags:task_tags(tags(*))
      `).eq("user_id",r).order("created_at",{ascending:!1}).limit(parseInt(a));s&&"all"!==s&&(o=o.eq("status",s));let{data:n,error:p}=await o;if(p)return u.NextResponse.json({error:p.message},{status:500});return u.NextResponse.json({tasks:n})}catch(e){return u.NextResponse.json({error:"Internal server error"},{status:500})}}async function d(e){try{let{user_id:t,title:r,description:s,priority:a,due_date:o,tags:n}=await e.json();if(!t||!r)return u.NextResponse.json({error:"User ID and title required"},{status:400});let{data:p,error:d}=await i.O.from("tasks").insert({user_id:t,title:r,description:s||null,priority:a||"medium",due_date:o||null,status:"pending",tally_count:0,pomodoro_count:0,total_time_seconds:0}).select().single();if(d)return u.NextResponse.json({error:d.message},{status:500});if(n&&n.length>0){let e=n.map(e=>({task_id:p.id,tag_id:e})),{error:t}=await i.O.from("task_tags").insert(e);if(t)return u.NextResponse.json({error:t.message},{status:500})}return u.NextResponse.json({task:p},{status:201})}catch(e){return u.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/tasks/route",pathname:"/api/tasks",filename:"route",bundlePath:"app/api/tasks/route"},resolvedPagePath:"D:\\vibecode\\tasktask\\app\\api\\tasks\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:g}=l,k="/api/tasks/route";function x(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},5662:(e,t,r)=>{r.d(t,{N:()=>o,O:()=>a});var s=r(7857);let a=(0,s.eI)("https://your-project.supabase.co","your-anon-key"),o=()=>(0,s.eI)("https://your-project.supabase.co","your-anon-key")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,564],()=>r(7133));module.exports=s})();